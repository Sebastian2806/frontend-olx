(this.webpackJsonpolx_frontend=this.webpackJsonpolx_frontend||[]).push([[0],{191:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),i=a.n(r),c=a(11),o=a.n(c),s=a(10),l=a(3),u=a(17),d=a(22),p=a(54),j=a(78),b=a(135),m="AUTH_SUCCESS",h="AUTH_FAIL",x="LOGIN_SUCCESS",O="LOGIN_FAIL",g={},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case m:return Object(s.a)(Object(s.a)({},e),{},{user:Object(s.a)(Object(s.a)({},n),{},{isLoggedIn:!0})});case h:return Object(s.a)(Object(s.a)({},e),{},{user:Object(s.a)(Object(s.a)({},n),{},{isLoggedIn:!1})});case x:return Object(s.a)(Object(s.a)({},e),{},{signupStatus:{status:n.status}});case O:return Object(s.a)(Object(s.a)({},e),{},{signupStatus:Object(s.a)({},n)});default:return e}},y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||j.c,v=Object(j.d)(f,y(Object(j.a)(b.a))),w=a(89),k=a(136);function N(){var e=Object(k.a)(["\n    :root {\n        font-family: 'Poppins', sans-serif;  \n        --vh: 1vh;\n        ","\n    }\n\n    * {\n        box-sizing: border-box;\n    }\n\n    body {\n        margin: 0;\n        padding: 0; \n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n"]);return N=function(){return e},e}var S=Object(w.b)(N(),""),_={light:"#FFFAEE",yellow:"#D0A538",dark:"#293132",fonts:{s:"1.4rem",m:"1.8rem",l:"2.4rem",xl:"3.6rem",xxl:"6.4rem",xxxl:"12rem"},weight:{light:"300",regular:"500",bold:"700"}},z=function(e){var t=e.children;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(S,{}),Object(n.jsx)(w.a,{theme:_,children:t})]})},C=a(14),E=a(8),I=a(222),T=a(224),L=a(225),P=a(226),A=a(220),U=a(143),D=a.n(U),F=a(145),W=a.n(F),B=a(144),M=a.n(B),q=a(91),H=a(44),Z="http://localhost:8080/",V=new(function(){function e(){Object(q.a)(this,e)}return Object(H.a)(e,[{key:"signin",value:function(e){return fetch("".concat(Z,"signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},{key:"logout",value:function(){localStorage.removeItem("token"),localStorage.removeItem("user_id")}},{key:"register",value:function(e){return fetch("".concat(Z,"signup"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},{key:"getCurrentUser",value:function(){return localStorage.getItem("token")}},{key:"getCurrentUserId",value:function(){return localStorage.getItem("user_id")}}]),e}()),J=Object(A.a)((function(e){return{toolbar:{backgroundColor:e.palette.grey[800]},h1:{padding:"10px 20px",fontSize:30,textDecoration:"none",color:"#fff",flexGrow:1},h2:{fontSize:30,textAlign:"center"},icon:{color:"#fff"},input:{margin:"0 0 20px 0"},button:{margin:"30px 0 20px 0"}}})),R=function(){var e=J(),t=Object(r.useState)(null),a=Object(C.a)(t,2),i=a[0],c=a[1],o=Object(r.useState)(null),s=Object(C.a)(o,2),l=s[0],u=s[1];Object(r.useEffect)((function(){var e=V.getCurrentUser(),t=V.getCurrentUserId();e&&c(e),t&&u(t)}),[]);return Object(n.jsx)(I.a,{position:"static",children:Object(n.jsxs)(T.a,{className:e.toolbar,children:[Object(n.jsx)(L.a,{className:e.h1,to:"/",component:d.b,children:"XLO"}),Object(n.jsx)(P.a,{component:d.b,className:e.icon,to:i?"/userdetails/".concat(l):"/signin",children:Object(n.jsx)(D.a,{})}),i?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(P.a,{component:d.b,to:"/addannoucement",className:e.icon,children:Object(n.jsx)(M.a,{})}),Object(n.jsx)(P.a,{component:d.b,to:"/",className:e.icon,onClick:function(){V.logout(),c(null)},children:Object(n.jsx)(W.a,{})})]}):null]})})},G=function(e){var t=e.children;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(R,{}),t]})},X=a(58),$=a.n(X),K=a(193),Q=a(194),Y=a(227),ee=a(146),te=a.n(ee),ae=Object(A.a)((function(e){return{container:{width:"100%",height:"100%",position:"relative"},image:{width:"100%",height:"100%",objectFit:"cover"},iconContainer:{width:"100%",height:"100%",position:"absolute",top:0,left:0,backgroundColor:e.palette.grey[800],display:"flex",alignItems:"center",justifyContent:"center"},iconContainer_hide:{display:"none"}}})),ne=function(e){var t=ae(),a=Object(r.useState)({isLoaded:!1,isError:!1}),i=Object(C.a)(a,2),c=i[0],o=i[1],l=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=l.current;e&&e.complete&&(0===e.naturalWidth?o({isError:!0,isLoaded:!0}):o(Object(s.a)(Object(s.a)({},c),{},{isLoaded:!0})))}),[]);return Object(n.jsxs)("div",{className:t.container,children:[Object(n.jsx)("img",Object(s.a)(Object(s.a)({},e),{},{alt:"",ref:l,onLoad:function(e){o(Object(s.a)(Object(s.a)({},c),{},{isLoaded:!0}))},onError:function(e){o({isError:!0,isLoaded:!0})},className:t.image})),Object(n.jsxs)("div",{className:$()(t.iconContainer,c.isLoaded&&!c.isError&&t.iconContainer_hide),children:[!c.isLoaded&&Object(n.jsx)(Y.a,{color:"secondary"}),c.isError&&Object(n.jsx)(te.a,{})]})]})},re=a(152),ie=a(234),ce=a(147),oe=a.n(ce),se=function(e){var t=e.ariaContols,a=e.ariaLabel,r=e.deleteAnnoucement,c=i.a.useState(null),o=Object(C.a)(c,2),s=o[0],l=o[1],u=Boolean(s);return Object(n.jsxs)("div",{children:[Object(n.jsx)(P.a,{"aria-label":a||"akcje","aria-controls":t||"actions","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},children:Object(n.jsx)(oe.a,{})}),Object(n.jsx)(re.a,{id:t||"actions",anchorEl:s,keepMounted:!0,open:u,onClose:function(){l(null)},children:Object(n.jsx)(ie.a,{onClick:r,children:"Usu\u0144"})})]})},le=Object(A.a)((function(e){var t;return{root:(t={width:"95%",height:300,margin:e.spacing(1),padding:e.spacing(1.5),backgroundColor:e.palette.grey[800],display:"flex",flexDirection:"column",alignItems:"flex-start"},Object(E.a)(t,e.breakpoints.up("sm"),{width:"calc(50% - (2 * ".concat(e.spacing(1),"px))")}),Object(E.a)(t,e.breakpoints.up("md"),{width:"calc(33.33% - (2 * ".concat(e.spacing(1),"px))")}),Object(E.a)(t,e.breakpoints.up("lg"),{width:"calc(25% - (2 * ".concat(e.spacing(1),"px))")}),t),container:{width:"100%",height:"50%"},desriptionContainer:{width:"100%",height:"50%",display:"flex",flexDirection:"column",justifyContent:"space-between"},link:{textDecoration:"none",color:"#fff"},bold:{fontWeight:e.typography.fontWeightBold},light:{fontWeight:e.typography.fontWeightLight,marginTop:e.spacing(1)},negotiate:{marginLeft:e.spacing(1)},priceContainer:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}}})),ue=function(e){var t=e._id,a=e.title,r=e.imageUrl,i=e.localization,c=e.price,o=e.userActions,s=e.deleteAnnoucement,l=le(),u=a.length>25?"".concat(a.slice(0,25),"..."):a;return Object(n.jsxs)(K.a,{component:"li",className:l.root,elevation:5,children:[Object(n.jsx)("div",{className:l.container,children:Object(n.jsx)(ne,{title:a,src:"http://localhost:8080/".concat(r)})}),Object(n.jsxs)("div",{className:$()(l.container&&l.desriptionContainer),children:[Object(n.jsx)(d.b,{className:l.link,to:"/annoucementDetails/".concat(t),children:Object(n.jsx)(Q.a,{className:l.light,component:"h3",variant:"h6",children:u})}),Object(n.jsxs)("div",{children:[Object(n.jsx)(Q.a,{variant:"subtitle2",children:i}),Object(n.jsxs)("div",{className:l.priceContainer,children:[Object(n.jsxs)(Q.a,{className:l.bold,component:"p",variant:"h6",children:[c," z\u0142",Object(n.jsx)(Q.a,{className:l.negotiate,component:"span",variant:"caption",children:"do negocjacji"})]}),o&&Object(n.jsx)(se,{deleteAnnoucement:function(){return s(t)}})]})]})]})]})},de=Object(A.a)((function(e){return{root:{padding:"30px 30px 0 30px",display:"flex",justifyContent:"center",margin:"0 auto",maxWidth:1280},annoucementsContainer:Object(E.a)({margin:0,width:"80%",padding:e.spacing(2),marginTop:e.spacing(5),maxWidth:1100,minWidth:300,listStyle:"none",display:"flex",justifyContent:"center",flexWrap:"wrap"},e.breakpoints.up("md"),{justifyContent:"flex-start"})}})),pe=Object(p.b)((function(e){return{}}))((function(){var e=de(),t=Object(r.useState)(null),a=Object(C.a)(t,2),i=a[0],c=a[1];return Object(r.useEffect)((function(){fetch("https://olxukw.herokuapp.com/getAnnoucements").then((function(e){return e.json()})).then((function(e){c(e.annoucements)})).catch((function(e){return console.log(e)}))}),[]),Object(n.jsx)(G,{children:Object(n.jsx)("main",{className:e.root,children:i?i.length>0?Object(n.jsx)("ul",{className:e.annoucementsContainer,component:"ul",children:i.map((function(e){var t=e._id,a=Object(l.a)(e,["_id"]);return Object(n.jsx)(ue,Object(s.a)({_id:t},a),t)}))}):Object(n.jsx)("p",{children:"Brak og\u0142osze\u0144 do wy\u015bwietlenia"}):Object(n.jsx)(Y.a,{color:"secondary"})})})})),je=a(39),be=a.n(je),me=a(64),he=a(15),xe=a(232),Oe=a(231),ge=a(228),fe=a(117),ye=a.n(fe),ve=Object(A.a)({box:{width:300,margin:"0 auto",padding:20},h2:{fontSize:30,textAlign:"center"},input:{margin:"0 0 20px 0"},button:{margin:"30px 0 20px 0"}}),we=Object(p.b)((function(e){return{user:e.user}}),(function(e){return{authenticate:function(t,a,n){return e(function(e,t,a){return function(){var n=Object(me.a)(be.a.mark((function n(r){var i;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ye.a.post("https://olxukw.herokuapp.com/signin",{email:e,password:t});case 3:return i=n.sent,localStorage.setItem("token",i.data.token),localStorage.setItem("user_id",i.data.user_id),r({type:m,payload:i.data}),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(0),localStorage.removeItem("token"),localStorage.removeItem("user_id"),a({email:"Niepoprawny email lub has\u0142o"}),r({type:h,payload:{message:"Niepoprawny email lub has\u0142o"}}),n.abrupt("return",!1);case 17:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(t,a,n))}}}))((function(e){var t=e.authenticate,a=e.history,i=e.user,c=ve(),o=Object(r.useState)(!1),s=Object(C.a)(o,2),l=s[0],u=s[1];return Object(r.useEffect)((function(){}),[i,a]),Object(n.jsx)(G,{children:Object(n.jsx)(he.c,{initialValues:{email:"",password:""},onSubmit:function(){var e=Object(me.a)(be.a.mark((function e(n,r){var i,c,o,s;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.email,c=n.password,o=r.setSubmitting,s=r.setErrors,o(!0),u(!0),e.next=6,t(i,c,s);case 6:e.sent&&a.push("/"),o(!1),u(!1);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),children:function(e){var t=e.values,a=e.errors,r=e.touched,i=e.isSubmitting;return Object(n.jsx)(he.b,{children:Object(n.jsxs)(xe.a,{className:c.box,display:"flex",flexDirection:"column",children:[Object(n.jsx)(Q.a,{className:c.h2,variant:"h2",gutterBottom:!0,children:"Logowanie"}),Object(n.jsx)(he.a,{error:!(!a.email||!r.email),type:"email",name:"email",label:"Email",variant:"outlined",as:Oe.a,className:c.input,value:t.email,helperText:a.email&&r.email?a.email:null}),Object(n.jsx)(he.a,{error:!(!a.password||!r.password),type:"password",name:"password",label:"Has\u0142o",variant:"outlined",as:Oe.a,className:c.input,value:t.password,helperText:a.password&&r.password?a.password:null}),Object(n.jsx)(ge.a,{className:c.button,variant:"contained",size:"large",color:"primary",type:"submit",disabled:i,children:l?Object(n.jsx)(Y.a,{color:"secondary"}):"Zaloguj si\u0119"}),Object(n.jsx)(ge.a,{to:"/signup",component:d.b,children:"Nie masz konta?"})]})})}})})})),ke=a(29),Ne=Object(A.a)({box:{width:300,margin:"0 auto",padding:20},h2:{fontSize:30,textAlign:"center"},input:{margin:"0 0 20px 0"},button:{margin:"30px 0 20px 0"}}),Se=ke.b().shape({email:ke.d().email("Niepoprawny adres email!").required("Pole wymagane!"),password:ke.d().min(5,"Has\u0142o zbyt kr\xf3tkie!").max(25,"Has\u0142o zbyt d\u0142ugie!").required("Pole wymagane!"),repeatedPassword:ke.d().oneOf([ke.c("password"),null],"Has\u0142a musz\u0105 pasowa\u0107!").required("Pole wymagane!")}),_e=Object(p.b)((function(e){return{signupStatus:e.signupStatus}}),(function(e){return{signup:function(t,a,n,r){return e(function(e,t,a,n){return function(){var r=Object(me.a)(be.a.mark((function r(i){var c,o,s;return be.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ye.a.put("https://olxukw.herokuapp.com/signup",{email:e,password:t,repeatedPassword:a});case 3:c=r.sent,i({type:x,payload:c}),r.next=14;break;case 7:r.prev=7,r.t0=r.catch(0),o={errors:r.t0.response.data.errors?r.t0.response.data.errors:[{param:"email",msg:"B\u0142\u0105d serwera!"}]},s={},o.errors.forEach((function(e){return s[e.param]=e.msg})),n(s),i({type:O,payload:o});case 14:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()}(t,a,n,r))}}}))((function(e){var t=e.signup,a=e.signupStatus,i=Ne(),c=Object(u.g)(),o=Object(r.useState)(!1),s=Object(C.a)(o,2),l=s[0],p=s[1];return Object(r.useEffect)((function(){a&&a.status&&201===a.status&&c.push("/signin")}),[a,c]),Object(n.jsx)(G,{children:Object(n.jsx)(he.c,{initialValues:{email:"",password:"",repeatedPassword:""},validationSchema:Se,onSubmit:function(){var e=Object(me.a)(be.a.mark((function e(a,n){var r,i,c,o,s;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.email,i=a.password,c=a.repeatedPassword,o=n.setSubmitting,s=n.setErrors,o(!0),p(!0),e.next=6,t(r,i,c,s);case 6:o(!1),p(!1);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),children:function(e){var t=e.values,a=e.errors,r=e.touched,c=e.isSubmitting;return Object(n.jsx)(he.b,{children:Object(n.jsxs)(xe.a,{className:i.box,display:"flex",flexDirection:"column",children:[Object(n.jsx)(Q.a,{className:i.h2,variant:"h2",gutterBottom:!0,children:"Rejestracja"}),Object(n.jsx)(he.a,{error:!(!a.email||!r.email),type:"email",name:"email",label:"Email",variant:"outlined",as:Oe.a,className:i.input,value:t.email,helperText:a.email&&r.email?a.email:null}),Object(n.jsx)(he.a,{error:!(!a.password||!r.password),type:"password",name:"password",label:"Has\u0142o",variant:"outlined",as:Oe.a,className:i.input,value:t.password,helperText:a.password?a.password:null}),Object(n.jsx)(he.a,{error:!(!a.repeatedPassword||!r.repeatedPassword),type:"password",name:"repeatedPassword",label:"Powt\xf3rz has\u0142o",variant:"outlined",as:Oe.a,className:i.input,value:t.repeatedPassword,helperText:a.repeatedPassword&&r.repeatedPassword?a.repeatedPassword:null}),Object(n.jsx)(ge.a,{className:i.button,variant:"contained",size:"large",color:"primary",type:"submit",disabled:c,children:l?Object(n.jsx)(Y.a,{color:"secondary"}):"Zarejestruj si\u0119"}),Object(n.jsx)(ge.a,{to:"/signin",component:d.b,children:"Masz ju\u017c konto?"})]})})}})})})),ze=a(233),Ce=a(235),Ee=a(118),Ie=a.n(Ee),Te=a(86),Le=a.n(Te),Pe=Object(A.a)((function(e){var t,a,n;return{root:{padding:"30px 30px 0 30px",display:"flex",justifyContent:"center",margin:"0 auto",maxWidth:900},box:{display:"flex",width:"100%"},leftContainer:Object(E.a)({padding:e.spacing(1),width:"100%"},e.breakpoints.up("md"),{width:"65%"}),rightContainer:(t={width:"100%"},Object(E.a)(t,e.breakpoints.down("sm"),{display:"flex"}),Object(E.a)(t,e.breakpoints.down("xs"),{display:"block"}),Object(E.a)(t,e.breakpoints.up("md"),{padding:e.spacing(1),width:"35%"}),t),paper:{marginBottom:e.spacing(2),padding:e.spacing(2)},paperImg:{height:270,display:"flex",alignItems:"center",justifyContent:"center"},paperSmall:(a={},Object(E.a)(a,e.breakpoints.down("md"),{width:"50%"}),Object(E.a)(a,e.breakpoints.down("xs"),{width:"100%"}),a),paperSmallRight:(n={},Object(E.a)(n,e.breakpoints.down("md"),{marginLeft:e.spacing(2)}),Object(E.a)(n,e.breakpoints.down("xs"),{marginLeft:0}),n),leftMargin:{marginLeft:e.spacing(1)},imgSize:{maxWidth:"100%",maxHeight:"100%"}}})),Ae=function(){var e=Pe(),t=Object(r.useState)(null),a=Object(C.a)(t,2),i=a[0],c=a[1],o=Object(u.h)().annId;return Object(r.useEffect)((function(){fetch("https://olxukw.herokuapp.com/getAnnoucement/".concat(o)).then((function(e){return e.json()})).then((function(e){c(e.annoucement)})).catch((function(e){return console.log(e)}))}),[]),Object(n.jsx)(G,{children:Object(n.jsx)("main",{className:e.root,children:i?Object(n.jsxs)("section",{className:e.box,children:[Object(n.jsxs)("div",{className:e.leftContainer,children:[Object(n.jsx)(K.a,{className:$()(e.paperImg,e.paper),children:Object(n.jsx)("img",{className:e.imgSize,alt:i.title,src:i.imageUrl})}),Object(n.jsx)(ze.a,{mdUp:!0,children:Object(n.jsxs)("div",{className:e.rightContainer,children:[Object(n.jsxs)(K.a,{className:$()(e.paper,e.paperSmall),children:[Object(n.jsx)(Q.a,{component:"h2",variant:"h5",children:"U\u017cytkownik"}),Object(n.jsxs)(ge.a,{to:"/userdetails/".concat(i.user_id._id),component:d.b,children:[Object(n.jsx)(Ce.a,{children:Object(n.jsx)(Le.a,{})}),Object(n.jsx)(Q.a,{variant:"body1",className:e.leftMargin,children:i.user_id.email})]}),Object(n.jsxs)(Q.a,{variant:"body2",className:e.leftMargin,children:[Object(n.jsx)(Q.a,{variant:"button",component:"span",children:"Zadzwo\u0144:"}),i.phone_number]})]}),Object(n.jsxs)(K.a,{className:$()(e.paper,e.paperSmall,e.paperSmallRight),children:[Object(n.jsx)(Q.a,{component:"h2",variant:"h5",children:"Lokalizacja"}),Object(n.jsxs)(xe.a,{display:"flex",alignItems:"center",children:[Object(n.jsx)(Ce.a,{children:Object(n.jsx)(Ie.a,{})}),Object(n.jsx)(Q.a,{variant:"body1",className:e.leftMargin,children:i.localization})]})]})]})}),Object(n.jsxs)(K.a,{className:e.paper,children:[Object(n.jsx)(Q.a,{component:"h2",variant:"h5",children:"Opis"}),Object(n.jsx)(Q.a,{variant:"body1",children:i.description})]})]}),Object(n.jsx)(ze.a,{smDown:!0,children:Object(n.jsxs)("div",{className:e.rightContainer,children:[Object(n.jsxs)(K.a,{className:e.paper,children:[Object(n.jsx)(Q.a,{component:"h2",variant:"h5",children:"U\u017cytkownik"}),Object(n.jsxs)(ge.a,{to:"/userdetails/".concat(i.user_id._id),component:d.b,children:[Object(n.jsx)(Ce.a,{children:Object(n.jsx)(Le.a,{})}),Object(n.jsx)(Q.a,{variant:"body1",className:e.leftMargin,children:i.user_id.email})]}),Object(n.jsxs)(Q.a,{variant:"body2",className:e.leftMargin,children:[Object(n.jsx)(Q.a,{variant:"button",component:"span",children:"Zadzwo\u0144:"}),i.phone_number]})]}),Object(n.jsxs)(K.a,{className:e.paper,children:[Object(n.jsx)(Q.a,{component:"h2",variant:"h5",children:"Lokalizacja"}),Object(n.jsxs)(xe.a,{display:"flex",alignItems:"center",children:[Object(n.jsx)(Ce.a,{children:Object(n.jsx)(Ie.a,{})}),Object(n.jsx)(Q.a,{variant:"body1",className:e.leftMargin,children:i.localization})]})]})]})})]}):Object(n.jsx)(Y.a,{color:"secondary"})})})};function Ue(){var e=localStorage.getItem("token");return e?{Authorization:"Bearer "+e}:{}}var De=Object(A.a)((function(e){return{box:{width:300,margin:"0 auto",padding:20},h2:{fontSize:30,textAlign:"center"},input:{margin:"0 0 20px 0"},button:{margin:"30px 0 20px 0"},paper:{margin:"0 0 20px 0"}}})),Fe=ke.b().shape({title:ke.d().max(40,"Tytu\u0142 mo\u017ce mie\u0107 maksymalnie 40 znak\xf3w!").required("Pole wymagane!"),price:ke.a().typeError("Dozwolone s\u0105 tylko cyfry!").positive("Liczba musi by\u0107 dodatnia!").lessThan(1e6,"Maksymalnie 1000000!").required("Pole wymagane!"),description:ke.d().max(200,"Opis mo\u017ce mie\u0107 maksymalnie 200 znak\xf3w!").required("Pole wymagane!"),phone_number:ke.d().matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"Numer telefonu nie jest poprawny!").required("Pole wymagane!"),localization:ke.d().max(40,"Lokalizacja mo\u017ce mie\u0107 maksymalnie 40 znak\xf3w!").required("Pole wymagane!"),category_id:ke.d().matches(/^[0-9a-zA-Z]{24}$|^[0-9a-zA-Z]{12}$/,"Wyst\u0105pi\u0142 b\u0142\u0105d!").required("Pole wymagane!")}),We=function(){var e=De(),t=Object(u.g)(),a=Object(r.useState)(!1),i=Object(C.a)(a,2),c=i[0],o=i[1],s=[{_id:"5f89da8c85d20106ed1fd759",name:"Dom i ogr\xf3d"},{_id:"5f89daa185d20106ed1fd75a",name:"Motoryzacja"},{_id:"5f89daa585d20106ed1fd75b",name:"Praca"}];return Object(n.jsx)(G,{children:Object(n.jsx)(he.c,{initialValues:{title:"",price:"",description:"",phone_number:"",localization:"",category_id:"",photo:""},validationSchema:Fe,onSubmit:function(e,a){var n=a.setSubmitting,r=a.setErrors,i=new FormData;i.append("title",e.title),i.append("price",e.price),i.append("description",e.description),i.append("phone_number",e.phone_number),i.append("localization",e.localization),i.append("category_id",e.category_id),i.append("photo",e.photo),o(!0),n(!0),fetch("https://olxukw.herokuapp.com/addAnnoucement",{method:"PUT",body:i,headers:Ue()}).then((function(e){return e.json()})).then((function(e){if(console.log(e),n(!1),o(!1),e.errors){var a={};e.errors.forEach((function(e){return a[e.param]=e.msg})),r(a)}else e.success?t.push("/"):r({title:"Wyst\u0119pi\u0142 b\u0142\u0105d serwera!"})})).catch((function(e){return console.log(e)}))},children:function(t){var a=t.values,r=t.errors,i=t.touched,o=t.isSubmitting;t.setFieldValue;return Object(n.jsx)(he.b,{children:Object(n.jsxs)(xe.a,{className:e.box,display:"flex",flexDirection:"column",children:[Object(n.jsx)(Q.a,{className:e.h2,variant:"h2",gutterBottom:!0,children:"Dodaj og\u0142oszenie"}),Object(n.jsx)(he.a,{error:!(!r.title||!i.title),name:"title",label:"Tytu\u0142",variant:"outlined",as:Oe.a,className:e.input,value:a.title,helperText:r.title&&i.title?r.title:null}),Object(n.jsx)(he.a,{error:!(!r.price||!i.price),name:"price",label:"Cena",variant:"outlined",as:Oe.a,className:e.input,value:a.price,helperText:r.price&&i.price?r.price:null}),Object(n.jsx)(he.a,{error:!(!r.description||!i.description),name:"description",label:"Opis",variant:"outlined",as:Oe.a,multiline:!0,rows:"4",className:e.input,value:a.description,helperText:r.description&&i.description?r.description:null}),Object(n.jsx)(he.a,{error:!(!r.phone_number||!i.phone_number),name:"phone_number",label:"Numer telefonu",variant:"outlined",as:Oe.a,className:e.input,value:a.phone_number,helperText:r.phone_number&&i.phone_number?r.phone_number:null}),Object(n.jsx)(he.a,{error:!(!r.localization||!i.localization),name:"localization",label:"Lokalizacja",variant:"outlined",as:Oe.a,className:e.input,value:a.localization,helperText:r.localization&&i.localization?r.localization:null}),Object(n.jsx)(he.a,{error:!(!r.category_id||!i.category_id),name:"category_id",select:!0,label:"Kategoria",variant:"outlined",as:Oe.a,className:e.input,value:a.category_id,helperText:r.category_id&&i.category_id?r.category_id:null,children:s.map((function(e){return Object(n.jsx)(ie.a,{value:e._id,children:e.name},e._id)}))}),a.photo?Object(n.jsx)(K.a,{className:e.paper,children:Object(n.jsx)(Q.a,{children:a.photo.name})}):"",Object(n.jsx)(ge.a,{className:e.button,variant:"contained",size:"large",color:"primary",type:"submit",disabled:o,children:c?Object(n.jsx)(Y.a,{color:"secondary"}):"Dodaj og\u0142oszenie"})]})})}})})},Be=Object(A.a)((function(e){return{root:{margin:"0 auto",display:"flex",alignItems:"center",flexDirection:"column",padding:e.spacing(2)},avatarSize:{margin:e.spacing(3),width:e.spacing(11),height:e.spacing(11)},card:{width:250,height:300,margin:e.spacing(1),textDecoration:"none"},annoucementsContainer:Object(E.a)({margin:0,width:"80%",padding:e.spacing(2),marginTop:e.spacing(5),maxWidth:1100,minWidth:300,listStyle:"none",display:"flex",justifyContent:"center",flexWrap:"wrap"},e.breakpoints.up("md"),{justifyContent:"flex-start"}),mediaImage:{height:130,display:"flex",flexDirection:"column"},text:{height:130},addUserForm:{margin:15,display:"flex",alignItems:"center",justifyContent:"center"},addUserFormBtn:{marginLeft:30}}})),Me=function(){var e=Be(),t=Object(r.useState)(null),a=Object(C.a)(t,2),i=a[0],c=a[1],o=Object(r.useState)(null),d=Object(C.a)(o,2),p=d[0],j=d[1],b=Object(u.h)().userId,m=V.getCurrentUserId(),h=function(e){fetch("https://olxukw.herokuapp.com/removeAnnoucement/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(p)}}).then((function(e){return e.json()})).then((function(e){var t=i.annoucements.filter((function(t){return t._id!==e.annoucement._id}));c(Object(s.a)(Object(s.a)({},i),{},{annoucements:t}))})).catch((function(e){return console.log(e)}))};return Object(r.useEffect)((function(){var e=V.getCurrentUser();j(e),fetch("https://olxukw.herokuapp.com/getUserAnnoucements/".concat(b)).then((function(e){return e.json()})).then((function(e){c(e)})).catch((function(e){return console.log(e)}))}),[]),Object(n.jsx)(G,{children:Object(n.jsx)("main",{className:e.root,children:i?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Ce.a,{className:e.avatarSize,children:Object(n.jsx)(Le.a,{className:e.avatarSize})}),Object(n.jsx)(Q.a,{component:"h2",variant:"h4",children:i.user.name||i.user.email}),b===m&&Object(n.jsx)(he.c,{initialValues:{username:""},onSubmit:function(e,t){var a,n=e.username,r=t.resetForm;a=n,fetch("https://olxukw.herokuapp.com/setName",{method:"POST",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({username:a})}).then((function(e){return e.json()})).then((function(e){c(Object(s.a)(Object(s.a)({},i),{},{user:Object(s.a)(Object(s.a)({},i.user),{},{name:a})}))})).catch((function(e){return console.log(e)})),r()},children:function(t,a,r){return Object(n.jsxs)(he.b,{className:e.addUserForm,children:[Object(n.jsx)(he.a,{as:Oe.a,variant:"outlined",label:"Wprowad\u017a imi\u0119",name:"username",error:!(!t.title||!a.title),helperText:t.title&&a.title?t.title:null}),Object(n.jsx)(ge.a,{className:e.addUserFormBtn,variant:"contained",type:"submit",disabled:r,children:"Zaktualizuj"})]})}}),Object(n.jsx)("ul",{className:e.annoucementsContainer,component:"ul",children:i.annoucements.map((function(e){var t=e._id,a=Object(l.a)(e,["_id"]);return Object(n.jsx)(ue,Object(s.a)(Object(s.a)({_id:t},a),{},{userActions:b===m,deleteAnnoucement:h}),t)}))})]}):Object(n.jsx)(Y.a,{color:"secondary"})})})},qe=a(151),He=a(229),Ze=a(230),Ve=Object(qe.a)({palette:{type:"dark"},breakpoints:{values:{xs:0,sm:700,md:960,lg:1280,xl:1400}}}),Je=function(e){var t=e.children,a=Object(l.a)(e,["children"]),r=V.getCurrentUser();return Object(n.jsx)(u.b,Object(s.a)(Object(s.a)({},a),{},{render:function(){return r?t:Object(n.jsx)(u.a,{to:"/"})}}))},Re=function(){return Object(n.jsx)(p.a,{store:v,children:Object(n.jsx)(d.a,{children:Object(n.jsx)(He.a,{theme:Ve,children:Object(n.jsxs)(z,{children:[Object(n.jsx)(Ze.a,{}),Object(n.jsxs)(u.d,{children:[Object(n.jsx)(u.b,{exact:!0,path:"/",component:pe}),Object(n.jsx)(u.b,{path:"/annoucementDetails/:annId",component:Ae}),Object(n.jsx)(u.b,{path:"/signin",component:we}),Object(n.jsx)(u.b,{path:"/signup",component:_e}),Object(n.jsx)(Je,{path:"/addannoucement",children:Object(n.jsx)(We,{})}),Object(n.jsx)(Je,{path:"/userdetails/:userId",children:Object(n.jsx)(Me,{})})]})]})})})})};o.a.render(Object(n.jsx)(Re,{}),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.2238e54f.chunk.js.map